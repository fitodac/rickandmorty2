{"ast":null,"code":"var _jsxFileName = \"/Users/fitodac/Sites/henry/rickandmorty/front/src/components/Form/Form.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useContext } from 'react';\nimport { validate } from './validate';\nimport localforage from 'localforage';\nimport { useNavigate } from 'react-router-dom';\nimport { AppContext } from '../../context/context';\nimport css from './Form.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst form_model = {\n  user: '',\n  password: ''\n};\nconst Form = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    updateAuth\n  } = useContext(AppContext);\n  const [form, setForm] = useState({\n    user: 'rick@rickandmortyapp.com',\n    password: 'S0!henry'\n  });\n  const [errors, setErrors] = useState({});\n  const [display_errors, setDisplayErrors] = useState(false);\n  const [access_denied, setAccessDenied] = useState(false);\n  const allowed_user = process.env.REACT_APP_USER;\n  const allowed_pwd = process.env.REACT_APP_PASSWORD;\n  const handleChange = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n    setErrors(validate({\n      ...form,\n      [e.target.name]: e.target.value\n    }));\n  };\n  const clearErrors = () => {\n    setDisplayErrors(false);\n    setAccessDenied(false);\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (Object.values(errors).length === 0) {\n      const {\n        user,\n        password\n      } = form;\n      if (user === allowed_user && password === allowed_pwd) {\n        localforage.setItem('user', form.user).then(() => {\n          setForm({\n            ...form_model\n          });\n          setErrors({});\n          navigate('/');\n        });\n      } else {\n        setAccessDenied(true);\n      }\n    } else {\n      setDisplayErrors(true);\n    }\n  };\n  useEffect(async () => {\n    await localforage.getItem('user').then(resp => {\n      if (resp) navigate('/');\n      updateAuth(resp);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-xs px-6 pt-32 mx-auto xl:px-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"w-full grid gap-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: css.fieldset,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: css.field,\n            placeholder: \"Usuario\",\n            name: \"user\",\n            value: form.user,\n            onChange: handleChange,\n            onKeyUp: clearErrors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 7\n          }, this), display_errors && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: css.errors,\n            children: errors.user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: css.fieldset,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            value: form.password,\n            className: css.field,\n            placeholder: \"Contrase\\xF1a\",\n            name: \"password\",\n            onChange: handleChange,\n            onKeyUp: clearErrors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 7\n          }, this), display_errors && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: css.errors,\n            children: errors.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: css.btn,\n          children: \"Entrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 5\n      }, this), access_denied && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-700 text-white text-sm leading-none py-2 px-5 mt-5 rounded-xl\",\n        children: \"El usuario o la contrase\\xF1a no son correctos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-white pt-10 grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Usuario: rick@rickandmortyapp.com\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Contrase\\xF1a: S0!henry\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n};\n_s(Form, \"p5kvxbaMH3T/H3C1WhVPEfHmDlE=\", false, function () {\n  return [useNavigate];\n});\n_c = Form;\nexport default Form;\nvar _c;\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"names":["useState","useEffect","useContext","validate","localforage","useNavigate","AppContext","css","jsxDEV","_jsxDEV","Fragment","_Fragment","form_model","user","password","Form","_s","navigate","updateAuth","form","setForm","errors","setErrors","display_errors","setDisplayErrors","access_denied","setAccessDenied","allowed_user","process","env","REACT_APP_USER","allowed_pwd","REACT_APP_PASSWORD","handleChange","e","target","name","value","clearErrors","handleSubmit","preventDefault","Object","values","length","setItem","then","getItem","resp","children","className","onSubmit","fieldset","type","field","placeholder","onChange","onKeyUp","fileName","_jsxFileName","lineNumber","columnNumber","btn","_c","$RefreshReg$"],"sources":["/Users/fitodac/Sites/henry/rickandmorty/front/src/components/Form/Form.jsx"],"sourcesContent":["import { \n\tuseState, \n\tuseEffect,\n\tuseContext \n} from 'react'\nimport { validate } from './validate'\nimport localforage from 'localforage'\nimport { useNavigate } from 'react-router-dom'\nimport { AppContext } from '../../context/context'\n\nimport css from './Form.module.css'\n\n\nconst form_model = { user: '', password: '' }\n\n\nconst Form = () => {\n\t\n\tconst navigate = useNavigate()\n\tconst { updateAuth } = useContext(AppContext)\n\n\tconst [form, setForm] = useState({ user: 'rick@rickandmortyapp.com', password: 'S0!henry' })\n\tconst [errors, setErrors] = useState({})\n\tconst [display_errors, setDisplayErrors] = useState(false)\n\tconst [access_denied, setAccessDenied] = useState(false)\n\tconst allowed_user = process.env.REACT_APP_USER\n  const allowed_pwd = process.env.REACT_APP_PASSWORD\n\n\t\n\tconst handleChange = e => {\n\t\tsetForm({...form, [e.target.name]: e.target.value })\n\t\tsetErrors(validate({...form, [e.target.name]: e.target.value }))\n\t}\n\n\n\tconst clearErrors = () => {\n\t\tsetDisplayErrors(false)\n\t\tsetAccessDenied(false)\n\t}\n\n\t\n\tconst handleSubmit = e => {\n\t\te.preventDefault()\n\n\t\tif( Object.values(errors).length === 0 ){\n\t\t\tconst { user, password } = form\n\t\t\t\n\t\t\tif( user === allowed_user && password === allowed_pwd ){\n\t\t\t\t\n\t\t\t\tlocalforage.setItem('user', form.user)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tsetForm({...form_model})\n\t\t\t\t\t\tsetErrors({})\n\t\t\t\t\t\tnavigate('/')\n\t\t\t\t\t})\n\n\t\t\t}else{\n\n\t\t\t\tsetAccessDenied(true)\n\n\t\t\t}\n\n\t\t} else {\n\t\t\tsetDisplayErrors(true)\n\t\t}\n\t}\n\n\n\tuseEffect(async () => {\n\t\tawait localforage.getItem('user').then(resp => {\n\t\t\tif( resp ) navigate('/')\n\t\t\tupdateAuth(resp)\n\t\t})\n\t}, [])\n\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"w-full max-w-xs px-6 pt-32 mx-auto xl:px-0\">\n\t\t\t\t<form \n\t\t\t\t\tonSubmit={ handleSubmit } \n\t\t\t\t\tclassName=\"w-full grid gap-y-4\">\n\t\t\t\t\t\n\t\t\t\t\t<div className={ css.fieldset }>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName={ css.field }\n\t\t\t\t\t\t\tplaceholder=\"Usuario\"\n\t\t\t\t\t\t\tname=\"user\"\n\t\t\t\t\t\t\tvalue={ form.user }\n\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\tonKeyUp={ clearErrors }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ display_errors && ( <p className={ css.errors }>{errors.user}</p> ) }\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={ css.fieldset }>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tvalue={ form.password }\n\t\t\t\t\t\t\tclassName={ css.field }\n\t\t\t\t\t\t\tplaceholder=\"Contraseña\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\tonKeyUp={ clearErrors }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ display_errors && ( <p className={ css.errors }>{errors.password}</p> ) }\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<button className={ css.btn }>\n\t\t\t\t\t\tEntrar\n\t\t\t\t\t</button>\n\t\t\t\t</form>\n\n\t\t\t\t{access_denied && (\n\t\t\t\t\t<div className=\"bg-red-700 text-white text-sm leading-none py-2 px-5 mt-5 rounded-xl\">\n\t\t\t\t\t\tEl usuario o la contraseña no son correctos\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"text-white pt-10 grid\">\n\t\t\t\t\t<div>Usuario: rick@rickandmortyapp.com</div>\n\t\t\t\t\t<div>Contraseña: S0!henry</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default Form"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}