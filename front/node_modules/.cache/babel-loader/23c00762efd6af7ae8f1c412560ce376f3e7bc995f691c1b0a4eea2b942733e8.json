{"ast":null,"code":"import _regeneratorRuntime from\"/Users/fitodac/Sites/henry/rickandmorty/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/fitodac/Sites/henry/rickandmorty/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/fitodac/Sites/henry/rickandmorty/front/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/fitodac/Sites/henry/rickandmorty/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/fitodac/Sites/henry/rickandmorty/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useContext}from'react';import{validate}from'./validate';import localforage from'localforage';import{useNavigate}from'react-router-dom';import{AppContext}from'../../context/context';import css from'./Form.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var form_model={user:'',password:''};var Form=function Form(){var navigate=useNavigate();var _useContext=useContext(AppContext),updateAuth=_useContext.updateAuth;var _useState=useState({user:'rick@rickandmortyapp.com',password:'S0!henry'}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),display_errors=_useState6[0],setDisplayErrors=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),access_denied=_useState8[0],setAccessDenied=_useState8[1];var allowed_user=process.env.REACT_APP_USER;var allowed_pwd=process.env.REACT_APP_PASSWORD;var handleChange=function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));setErrors(validate(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value))));};var clearErrors=function clearErrors(){setDisplayErrors(false);setAccessDenied(false);};var handleSubmit=function handleSubmit(e){e.preventDefault();if(Object.values(errors).length===0){var user=form.user,password=form.password;if(user===allowed_user&&password===allowed_pwd){localforage.setItem('user',form.user).then(function(){setForm(_objectSpread({},form_model));setErrors({});navigate('/');});}else{setAccessDenied(true);}}else{setDisplayErrors(true);}};useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return localforage.getItem('user').then(function(resp){if(resp)navigate('/');updateAuth(resp);});case 2:case\"end\":return _context.stop();}},_callee);})),[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-xs px-6 pt-32 mx-auto xl:px-0\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"w-full grid gap-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:css.fieldset,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:css.field,placeholder:\"Usuario\",name:\"user\",value:form.user,onChange:handleChange,onKeyUp:clearErrors}),display_errors&&/*#__PURE__*/_jsx(\"p\",{className:css.errors,children:errors.user})]}),/*#__PURE__*/_jsxs(\"div\",{className:css.fieldset,children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:form.password,className:css.field,placeholder:\"Contrase\\xF1a\",name:\"password\",onChange:handleChange,onKeyUp:clearErrors}),display_errors&&/*#__PURE__*/_jsx(\"p\",{className:css.errors,children:errors.password})]}),/*#__PURE__*/_jsx(\"button\",{className:css.btn,children:\"Entrar\"})]}),access_denied&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-700 text-white text-sm leading-none py-2 px-5 mt-5 rounded-xl\",children:\"El usuario o la contrase\\xF1a no son correctos\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-white pt-10 grid\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Usuario: rick@rickandmortyapp.com\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Contrase\\xF1a: S0!henry\"})]})]})});};export default Form;","map":{"version":3,"names":["useState","useEffect","useContext","validate","localforage","useNavigate","AppContext","css","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","form_model","user","password","Form","navigate","_useContext","updateAuth","_useState","_useState2","_slicedToArray","form","setForm","_useState3","_useState4","errors","setErrors","_useState5","_useState6","display_errors","setDisplayErrors","_useState7","_useState8","access_denied","setAccessDenied","allowed_user","process","env","REACT_APP_USER","allowed_pwd","REACT_APP_PASSWORD","handleChange","e","_objectSpread","_defineProperty","target","name","value","clearErrors","handleSubmit","preventDefault","Object","values","length","setItem","then","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","getItem","resp","stop","children","className","onSubmit","fieldset","type","field","placeholder","onChange","onKeyUp","btn"],"sources":["/Users/fitodac/Sites/henry/rickandmorty/front/src/components/Form/Form.jsx"],"sourcesContent":["import { \n\tuseState, \n\tuseEffect,\n\tuseContext \n} from 'react'\nimport { validate } from './validate'\nimport localforage from 'localforage'\nimport { useNavigate } from 'react-router-dom'\nimport { AppContext } from '../../context/context'\n\nimport css from './Form.module.css'\n\n\nconst form_model = { user: '', password: '' }\n\n\nconst Form = () => {\n\t\n\tconst navigate = useNavigate()\n\tconst { updateAuth } = useContext(AppContext)\n\n\tconst [form, setForm] = useState({ user: 'rick@rickandmortyapp.com', password: 'S0!henry' })\n\tconst [errors, setErrors] = useState({})\n\tconst [display_errors, setDisplayErrors] = useState(false)\n\tconst [access_denied, setAccessDenied] = useState(false)\n\tconst allowed_user = process.env.REACT_APP_USER\n  const allowed_pwd = process.env.REACT_APP_PASSWORD\n\n\t\n\tconst handleChange = e => {\n\t\tsetForm({...form, [e.target.name]: e.target.value })\n\t\tsetErrors(validate({...form, [e.target.name]: e.target.value }))\n\t}\n\n\n\tconst clearErrors = () => {\n\t\tsetDisplayErrors(false)\n\t\tsetAccessDenied(false)\n\t}\n\n\t\n\tconst handleSubmit = e => {\n\t\te.preventDefault()\n\n\t\tif( Object.values(errors).length === 0 ){\n\t\t\tconst { user, password } = form\n\t\t\t\n\t\t\tif( user === allowed_user && password === allowed_pwd ){\n\t\t\t\t\n\t\t\t\tlocalforage.setItem('user', form.user)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tsetForm({...form_model})\n\t\t\t\t\t\tsetErrors({})\n\t\t\t\t\t\tnavigate('/')\n\t\t\t\t\t})\n\n\t\t\t}else{\n\n\t\t\t\tsetAccessDenied(true)\n\n\t\t\t}\n\n\t\t} else {\n\t\t\tsetDisplayErrors(true)\n\t\t}\n\t}\n\n\n\tuseEffect(async () => {\n\t\tawait localforage.getItem('user').then(resp => {\n\t\t\tif( resp ) navigate('/')\n\t\t\tupdateAuth(resp)\n\t\t})\n\t}, [])\n\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"w-full max-w-xs px-6 pt-32 mx-auto xl:px-0\">\n\t\t\t\t<form \n\t\t\t\t\tonSubmit={ handleSubmit } \n\t\t\t\t\tclassName=\"w-full grid gap-y-4\">\n\t\t\t\t\t\n\t\t\t\t\t<div className={ css.fieldset }>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName={ css.field }\n\t\t\t\t\t\t\tplaceholder=\"Usuario\"\n\t\t\t\t\t\t\tname=\"user\"\n\t\t\t\t\t\t\tvalue={ form.user }\n\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\tonKeyUp={ clearErrors }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ display_errors && ( <p className={ css.errors }>{errors.user}</p> ) }\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={ css.fieldset }>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tvalue={ form.password }\n\t\t\t\t\t\t\tclassName={ css.field }\n\t\t\t\t\t\t\tplaceholder=\"Contraseña\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\tonKeyUp={ clearErrors }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ display_errors && ( <p className={ css.errors }>{errors.password}</p> ) }\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<button className={ css.btn }>\n\t\t\t\t\t\tEntrar\n\t\t\t\t\t</button>\n\t\t\t\t</form>\n\n\t\t\t\t{access_denied && (\n\t\t\t\t\t<div className=\"bg-red-700 text-white text-sm leading-none py-2 px-5 mt-5 rounded-xl\">\n\t\t\t\t\t\tEl usuario o la contraseña no son correctos\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"text-white pt-10 grid\">\n\t\t\t\t\t<div>Usuario: rick@rickandmortyapp.com</div>\n\t\t\t\t\t<div>Contraseña: S0!henry</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default Form"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}